# file: docker-compose.yml
#
# Tests the following:
# - Crayfits starts.
# - Can generate PNG thumbnails from PDFs using ImageMagick.
---

name: crayfits-integrationtests
services:
  # Serve test files over HTTP
  nginx:
    image: nginx:stable-alpine
    volumes:
      - ../../../hypercube/tests/IntegrationTests/fixtures:/usr/share/nginx/html
  fits:
    image: ${FITS:-islandora/fits:local}
  crayfits:
    image: ${CRAYFITS:-islandora/crayfits:local}
    volumes:
      - ./test.sh:/test.sh # Test to run.
    command:
      - /test.sh # Run test and exit.
    depends_on:
      - fits
